!function(a,b){"use strict";var c,d,e,f=function(){c=a('<div id="vamtam-colorpicker"></div>').hide(),a("body").append(c),e=a.farbtastic("#vamtam-colorpicker"),c.append(function(){return a('<a class="transparent">transparent</a>').click(function(){d&&(a(d).val("transparent").css({background:"white"}),c.fadeOut())})})};a.fn.vamtamColorPicker=function(){var b=this;return c||f(),a("[type=color], .vamtam-color-input",b).not(".vamtam-colorpicker").each(function(){a(this).prop("type","text").addClass("vamtam-colorpicker"),e.linkTo(this)}).on("focus",null,function(){d&&a(d).removeClass("colorwell-selected");var b=this;e.linkTo(function(c){a(b).val(c).change()}),c.css({position:"absolute",left:a(this).offset().left+a(this).outerWidth(),top:a(this).offset().top}).fadeIn(),a(d=this).addClass("colorwell-selected")}).on("blur",null,function(){c.fadeOut()}).on("change keyup",null,function(){a(this).css({"background-color":a(this).val()})}),this}}(jQuery),function(a,b){"use strict";a.ajax({type:"POST",url:ajaxurl,data:{action:"vamtam-get-icon-list"},success:function(b){window.VamtamIconsCache=b,a(document).trigger("vamtam-icons-loaded")}}),a.fn.vamtamIconsSelector=function(b){var c=a(".vamtam-config-icons-selector",this);return function(){var a=/MSIE (\d+)/.exec(navigator.userAgent);if(!a||8===a[1]){var b=function(){c.find(":radio.checked").removeClass("checked"),c.find(":checked").addClass("checked")};c.find(":radio").unbind("change.vamtamicons").bind("change.vamtamicons",b),b()}}(),function(){var d=function(b,c){var d=b.find(":checked"),f=d.val(),g=d.prop("name")||(new Date).getTime().toString(16),h=b.find(".icons-wrapper");d.remove();var i=function(b,c){var d=a('<input type="radio" />').attr("name",g).attr("id",g+b).val(b),e=a('<label class="single-icon" />').attr("for",g+b).html(c);return b===f&&d.prop("checked",!0),d.add(e)};for(var j in c)h.append(i(j,c[j]));h.removeClass("spinner"),b.addClass("icons-loaded").find(".icons-filter").bind("change paste keydown keyup search",function(){var c=a(this).val().toLowerCase();b.find("label:has(span[title])").show().each(function(){a(this).find("span").attr("title").toLowerCase().match(c)||a(this).hide()})}),setTimeout(function(){e(b)},100)},e=function(b){b.each(function(){a(this).find(".icons-wrapper").scrollTop(0),a(this).find(".icons-wrapper").scrollTop(a(this).find(":checked + label").offset().top-a(this).find(".icons-wrapper").offset().top)})};c.filter(":not(.icons-loaded)").each(function(){var b=a(this);window.VamtamIconsCache?d(b,window.VamtamIconsCache):a(document).one("vamtam-icons-loaded",function(){d(b,window.VamtamIconsCache)})}),c.filter(".icons-loaded").each(function(){var c=a(this);if("string"==typeof b)switch(b){case"scroll":e(c)}})}(),this}}(jQuery),function(a,b){"use strict";a.fn.vamtamBackgroundOption=function(){return a(this).find(".vamtam-config-row.background:not(.vamtambg-loaded)").each(function(){var b=a(this).addClass("vamtambg-loaded"),c=b.find(".bg-block.bg-size"),d=b.find(".bg-block.bg-repeat"),e=b.find(".bg-block.bg-position");c.find("input").bind("change",function(){d.add(e).show(),"cover"===a(":checked",c).val()&&d.add(e).hide()}).change()}),this}}(jQuery),function(a,b){"use strict";a.VAMTAM=a.VAMTAM||{},a.VAMTAM.upload={init:function(){var b;a(document).on("click",".vamtam-upload-button",function(c){var d=a(this).attr("data-target");b=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:a(this).hasClass("vamtam-video-upload")?"video":"image"}}),b.on("select",function(){var c=b.state().get("selection").first();a.VAMTAM.upload.fill(d,c.attributes.url)}),b.open(),c.preventDefault()}),a(document).on("click",".vamtam-upload-clear",function(b){a.VAMTAM.upload.remove(a(this).attr("data-target")),b.preventDefault()}),a(document).on("click",".vamtam-upload-undo",function(b){a.VAMTAM.upload.undo(a(this).attr("data-target")),b.preventDefault()})},fill:function(b,c){if(/^\s*$/.test(c))return void a.VAMTAM.upload.remove(b);var d=a("#"+b);d.data("undo",d.val()),d.val(c),d.siblings(".vamtam-upload-clear, .vamtam-upload-undo").css({display:"inline-block"}),a.VAMTAM.upload.preview(b,c)},preview:function(b,c){a("#"+b+"_preview").parents(".upload-basic-wrapper").addClass("active"),a("#"+b+"_preview").find("img").attr("src",c).css({display:"inline-block"})},remove:function(b){var c=a("#"+b);a("#"+b+"_preview").find("img").attr("src","").hide(),a("#"+b+"_preview").parents(".upload-basic-wrapper").removeClass("active"),c.data("undo",c.val()).val("").siblings(".vamtam-upload-undo").css({display:"inline-block"}).siblings(".vamtam-upload-clear").hide()},undo:function(b){var c=a("#"+b);this.preview(b,c.data("undo")),c.val(c.data("undo")),c.data("undo","").siblings(".vamtam-upload-undo").hide();var d=c.siblings(".vamtam-upload-clear");0===c.val().length&&d.is(":visible")?d.hide():c.val().length>0&&d.is(":hidden")&&d.css({display:"inline-block"})}}}(jQuery),function(a,b){"use strict";a.VAMTAM=a.VAMTAM||{},a.VAMTAM.icon_manager={init:function(){var b,c;a(document).on("click",".vamtam-upload-icon-font",function(d){b=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:"application/zip"}}),b.on("select",function(){var d=b.state().get("selection").first();c=d.id,a(".vamtam-icon-font-setup .step-1 .step-in-progress").text(d.attributes.filename).show(),a(".vamtam-icon-font-setup .postbox-container.step-2").removeClass("inactive")}),b.open(),d.preventDefault()}),a(document).on("click",".vamtam-process-icon-font",function(b){b.preventDefault();var d=a(this);d.siblings(".step-in-progress").show(),a.ajax({type:"POST",url:ajaxurl,data:{action:"vamtam-process-icon-font",selected:c,_ajax_nonce:a(this).data("nonce")},dataType:"json",success:function(b){d.siblings(".step-in-progress").hide();var c="";if("error"in b)c=b.error;else for(var e in b){c+="custom-"+e+': <svg width="32" height="32" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">';for(var f=0;f<b[e].length;f++)c+='<path d="'+b[e][f]+'" fill="#666"/>';c+="</svg><br>"}a(".vamtam-icon-font-setup .postbox-container.step-3").removeClass("inactive").find(".result-generated").html(c).parent().show()}})})}},a.VAMTAM.icon_manager.init()}(jQuery),function(a,b){"use strict";a.VAMTAM=a.VAMTAM||{},a.VAMTAM.horizontal_blocks={init:function(){a(".horizontal_blocks .vamtam-range-input").change(function(){a.VAMTAM.horizontal_blocks.set_active(a(this).val(),a(this).attr("id"))}),a(".horizontal_blocks select").change(function(){a.VAMTAM.horizontal_blocks.resize(a(this).parents(".block").parent(),a(this).val())}),a('.horizontal_blocks [name*="last"]').change(function(){var b=a(this).parents(".block").parent();b.is(".last")!==a(this).is(":checked")&&a.VAMTAM.horizontal_blocks.toggle_last(b)})},set_active:function(b,c){a('[rel="'+c+'"]').removeClass("active"),a('[rel="'+c+'"]:lt('+b+")").addClass("active")},resize:function(a,b){a.removeClass(a.attr("data-width")).addClass(b).attr("data-width",b),"full"===b?a.find("label").hide():a.find("label").show()},toggle_last:function(a){a.is(".last")?a.removeClass("last").next().remove():a.addClass("last").after('<div class="clearboth"></div>')}}}(jQuery),function(a,b){"use strict";a.VAMTAM=a.VAMTAM||{},a(function(){function b(b){var c=a.parseJSON(a(b).attr("data-fields")),d=!0;for(var e in c){var f=a('[name="'+e+'"]');if(f.is(":checkbox")){if(!!c[e]!==f.is(":checked")){d=!1;break}}else if(!f.val()||!c[e]||f.val().toString()!==c[e].toString()){d=!1;break}}d&&a(b).addClass("selected")}function c(b){var c=a(b).closest(".vamtam-config-row.font"),d=c.find(".font-preview"),e=function(){var b=document.createElement("LINK");b.rel="stylesheet",b.type="text/css",c.find(".font-styles").html("")[0].appendChild(b),a.ajax({type:"POST",url:ajaxurl,data:{action:"vamtam-font-preview",face:c.find(".face").val(),weight:c.find(".weight").val()},success:function(a){b.href=a,d.css({font:f,color:c.find(".vamtam-color-input").val()})}})};if(a(b).is(".vamtam-color-input"))d.css("color",c.find(".vamtam-color-input").val());else{var f=c.find(".weight").val()+" "+c.find(".size").val()+"px/"+c.find(".lheight").val()+'px "'+c.find(".face").val()+'"';if(a(b).hasClass("face")){var g=c.find(".weight"),h=g.val();g.empty(),a(VAMTAM_ADMIN.fonts[a(b).val()].weights).each(function(a,b){g.append("<option>"+b+"</option>")}),g.val(h),e()}else a(b).hasClass("weight")?e():d.css({font:f,color:c.find(".vamtam-color-input").val()})}}a("body").vamtamColorPicker().vamtamIconsSelector().vamtamBackgroundOption(),a(".vamtam-range-input").uirange(),a.VAMTAM.horizontal_blocks.init(),a.VAMTAM.upload.init(),a(document).on("change select","[data-field-filter]",function(){var b=a(this).attr("data-field-filter"),c=a(":checked",this).val();a(this).closest(".vamtam-config-group").find("."+b).filter(":not(.hidden)").show().filter(":not(."+b+"-"+c+")").hide()}),a("[data-field-filter]").change(),a("body").on("click",".vamtam-icon-selector-trigger",function(b){var c=a("#wpwrap > .vamtam-config-icons-selector"),d=a(this);a.magnificPopup.open({type:"inline",items:{src:c},closeOnBgClick:!1,callbacks:{open:function(){c.show()},close:function(){c.hide()}}}),c.find('[value="'+a(this).data("icon-name")+'"]').prop("checked",!0).change(),c.parent().vamtamIconsSelector("scroll"),c.find(":radio").bind("change.vamtam-icons-selector",function(){var b=c.find(":checked"),e=b.val();a.magnificPopup.close(),d.data("icon-name",e);var f=d.find("+ input");f&&f.val(e),d.html(b.next().find("span").html()),d.removeClass("theme no-icon"),e.match(/^theme-/)?d.addClass("theme"):e.match(/^\s*$/)&&d.addClass("no-icon").html(""),c.find(":radio").unbind("change.vamtam-icons-selector");try{a.VAMTAMED.saveHTML()}catch(a){}}),b.preventDefault()}),a(document).on("change",".social_icon_select_sites",function(){var b=a(this).closest("p").siblings(".social_icon_wrap");b.children("p").hide(),a("option:selected",this).each(function(){b.find(".social_icon_"+a(this).val()).show()})}),a(document).on("change",".num_shown",function(){var b=a(this).closest("p").siblings(".hidden_wrap");b.children("div").hide(),a(".hidden_el:lt("+a(this).val()+")",b).show()}),a(".metabox").each(function(){var b=a("<ul>").addClass("vamtam-meta-tabs");a(".config-separator:first",this).before(b),a(".config-separator",this).each(function(){var c=a(this).text().replace(/[\s\n]+/g,"").toLowerCase();a(this).nextUntil(".config-separator").wrapAll('<div class="vamtam-meta-part" id="tab-'+c+'"></div>'),a(this).css("cursor","pointer"),a(this).next().is(".vamtam-meta-part")&&b.append('<li class="vamtam-meta-tab '+a(this).attr("data-tab-class")+'"><a href="#tab-'+c+'" title="">'+a(this).text()+"</a></li>"),a(this).remove()}),b.children().length>1?b.closest(".metabox").tabs():b.hide()}),a("#vamtam-config").tabs({activate:function(b,c){var d=c.newTab.context.hash,e=a(d);e.attr("id",""),window.location.hash=d,e.attr("id",d.replace("#","")),a(".save-vamtam-config").show(),c.newTab.hasClass("nosave")&&a(".save-vamtam-config").hide()},create:function(b,c){c.tab.hasClass("nosave")&&a(".save-vamtam-config").hide()}}),a("body").on("click",".info-wrapper > a",function(b){var c=a(this).attr("data-other");a(this).attr("data-other",a(this).text()).text(c),a(this).siblings(".desc").slideToggle(200),b.preventDefault()}),a("body").on("click",".vamtam-autofill",function(){a(this).addClass("selected").siblings().removeClass("selected");var b=a.parseJSON(a(this).attr("data-fields")),c=a(this).closest(".vamtam-config-group");for(var d in b){var e=c.find('[name="'+d+'"]');e.is(":checkbox")?1===b[d]?e.attr("checked","checked"):e.attr("checked",!1):(e.val(b[d]),e.is(".image-upload")&&a.VAMTAM.upload.fill(e.attr("id"),b[d])),e.change()}return!1}),a(".vamtam-autofill").each(function(){b(this);var c=this,d=a.parseJSON(a(c).attr("data-fields")),e=function(){a(c).removeClass("selected"),b(c)};for(var f in d)a("#"+f).change(e)}),a(".vamtam-config-row.body-layout label").click(function(){a(this).addClass("selected"),a(this).parent().siblings().find("label").removeClass("selected")}),a(".vamtam-config-row.body-layout input").change(function(){a(this).is(":checked")&&a('label[for="'+a(this).attr("id")+'"]').click()}),a(document).on("click","label img",function(){a("#"+a(this).parents("label").attr("for")).click()}),a(".vamtam-config-row.font input, .vamtam-config-row.font select").bind("change",function(){c(this)}),setTimeout(function(){a(".vamtam-config-row.font").each(function(){c(a(".face",this)[0])})},0)})}(jQuery),function(a,b){"use strict";a(function(){var b=[{options:"#vamtam-post-format-options",select:"#post-formats-select"},{options:"#vamtam-portfolio-format-options",select:"#vamtam-portfolio-formats-select"}];_.each(b,function(b){var c=a(b.options);if(c.length){var d=c.find(".vamtam-meta-tabs").hide(),e=a(b.select);e.find(":radio").change(function(){var b=e.find(":checked"),c=b.prop("id")||"post-format-"+b.val(),f=d.find("li.vamtam-"+c+" a");f.click(),d.parent().find(".vamtam-config-row.vamtam-all-formats").appendTo(a(f.attr("href")))}).change(),c.insertBefore(a("#postdivrich")).addClass("vamtam-repositioned")}})})}(jQuery);